function check_session(){var t=$("#session").val();if("login"==t)console.log("success");else if("off"==t)return void alertify.success("Inicie session para hacer esta accion")}function actualizar_datos(t,o){$.ajax({url:"../actualizar_comentario.php",type:"post",data:{id_comentario:o,comentario:t}}).done(function(t){alertify.success("hola")})}function refactorizador(t){return t=t.replace(/[|<a>|"|-|<|>]/gi,"")}function leer_comentarios(t){var o=$("#id_user").val();$.ajax({url:"../leer_comentarios.php",type:"post",data:{id_post:t}}).done(function(t){var e="",a=JSON.parse(t);for(i=0;i<a.length;i++)e+=`<div id='coment${a[i].id_comentario}'>`,e+="<div class='panel-heading'>&nbsp"+a[i].usuario,a[i].id_user==o&&(e+="\n\t\t\t\t\t\t\t<div class=\"dropdown\" style='float:left'>\n\t\t\t\t\t\t\t  <img  class='dropdown-toggle' data-toggle=\"dropdown\" src='../assets/menu.png'>\t\t\t\t\t\n\t\t\t\t\t\t\t  <ul class=\"dropdown-menu\">",e+="<li><a onclick=eliminar_video("+a[i].id_comentario+")>Eliminar</a></li>",e+=`<li><a onclick="modificar_comentario(${a[i].id_comentario},'coment${a[i].id_comentario}','${a[i].texto}')">Modificar</a></li>`,e+="\n\t\t\t\t\t\t\t  </ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t"),e+="</div>",e+=`<img  style='height:50px; width:50px;  float:left' src='../${a[i].foto_url}' class='img-circle'>`,e+="<div class='panel-body'><p style='font-size:12px;'>"+a[i].texto+"</p>",e+="<strong style='float:right'>"+a[i].fecha_publicacion+"</strong><hr/>",e+="</div></div>";$("#comentarios").html(e)})}function eliminar_video(t){alertify.confirm("estas seguro que quieres eliminar el comentario?","se borrara automaticamente de este video",function(){$.ajax({url:"../eliminar_comentario.php",type:"post",data:{id:t}}).done(function(t){"success"==t?alertify.success("comentario eliminado"):alertify.error("error al eliminar"),leer_comentarios($("#id_post").val())})},function(){})}function modificar_comentario(t,o=null,e=null){id_user=$("#id_user").val(),$(`#${o}`).html(`<textarea id='s${o}'>${e}</textarea>\n\t\t<br><button class='btn-primary boton_update' id='${o}update_coment'>Update</button>`),$(`#${o}update_coment`).click(()=>{$.ajax({url:"../gestos_on.php",type:"post",data:{action:"update_coment",text_coment:$(`#s${o}`).val(),id_comentario:t}}).done(function(t){leer_comentarios($("#id_post").val())})})}function onScrollEvent(t,o){t.forEach(function(t){if(t.isIntersecting){var o=t.target.attributes["data-src"].textContent;t.target.src=o,t.target.classList.add("visible")}})}$("document").ready(function(){var t=!0;$("#show_coments").click(function(){1==t?($("#coment_now").show("slow"),t=!1):($("#coment_now").hide("slow"),t=!0)}),$("#comentar").click(function(){""!=$("#comentario").val()&&($.ajax({url:"../guardar_comentario.php",type:"post",data:{id_post:$("#id_post").val(),id_user:$("#id_user").val(),comentario:$("#comentario").val()}}).done(function(t){$("#comentarios").trigger("click"),leer_comentarios($("#id_post").val())}),$("#comentario").val(""))})});var targets=document.querySelectorAll(".lazyLoad"),observer=new IntersectionObserver(onScrollEvent);targets.forEach(function(t){observer.observe(t)});